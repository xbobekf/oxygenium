{
  "fileName": "EnumerationMacros.scala",
  "filePath": "macros/src/main/scala/org/alephium/macros/EnumerationMacros.scala",
  "url": "https://github.com/alephium/alephium/macros/src/main/scala/org/alephium/macros/EnumerationMacros.scala",
  "summary": "The code defines a Scala object called `EnumerationMacros` that contains a single method called `sealedInstancesOf`. This method takes a type parameter `A` and returns a `TreeSet` of instances of the sealed trait or class `A`. The method uses Scala macros to generate the set of instances at compile time.\n\nThe `sealedInstancesOf` method first checks that the type `A` is a sealed trait or class. If it is not, the method throws an exception. If `A` is a sealed trait or class, the method retrieves all of its direct subclasses using the `knownDirectSubclasses` method. It then checks that all of the subclasses are objects (i.e., singleton instances of their respective classes) and throws an exception if any of them are not.\n\nFinally, the method constructs a `TreeSet` of the objects by calling the `apply` method of the `TreeSet` companion object and passing in a list of `Ident` nodes that reference the singleton objects. The `Ident` nodes are constructed using the `sourceModuleRef` method, which takes a `Symbol` representing a class or object and returns an `Ident` node that references the singleton instance of the object.\n\nThis code can be used in the larger project to generate sets of instances of sealed traits or classes. For example, suppose we have a sealed trait called `Fruit` with two case classes `Apple` and `Orange` that extend it:\n\n```\nsealed trait Fruit\ncase class Apple() extends Fruit\ncase class Orange() extends Fruit\n```\n\nWe can use the `sealedInstancesOf` method to generate a `TreeSet` of all instances of `Fruit` as follows:\n\n```\nval fruits = EnumerationMacros.sealedInstancesOf[Fruit]\n```\n\nThis will generate a `TreeSet` containing the singleton instances of `Apple` and `Orange`. We can then use this set to perform operations on all instances of `Fruit`, such as iterating over them or filtering them based on some criteria.",
  "questions": "1. What is the purpose of this code?\n   - This code defines a macro for enumerating all instances of a sealed trait or class in Scala.\n\n2. What is the license for this code?\n   - This code is licensed under the GNU Lesser General Public License, version 3 or later.\n\n3. What are the requirements for using this macro?\n   - This macro can only be used with a sealed trait or class, and all of its children must be objects."
}